<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='/styles.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='/responsive.css') }}">
    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet"> <!-- Include bootstrap button toggles -->
    <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script> <!-- Include bootstrap button toggles -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
    <script src="static/js/main_js.js"></script>
    <script src="https://kit.fontawesome.com/f5711aa632.js" crossorigin="anonymous"></script> <!-- Font Awesome 5 -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title>Post-Vaccine WaitTime Tracker</title>

  </head>

  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="#">
        <img src="./static/images/injection.png" width="42" height="42" class="d-inline-block align-top" alt="">
        <b>Post-Vaccine WaitTime Tracker</b>
      </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarText">
          <ul class="navbar-nav mr-auto">
            <!-- <li class="nav-item active">
              <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
            </li> -->
          </ul>
          <span class="navbar-text">
            <a class="nav-link" href="https://linkedin.com/in/kennethleungty" target="_blank"><small><i>Built by Kenneth Leung</i></small></a>
          </span>
        </div>
      </nav>

    <!-- <div class = container-lg>
      <div class = jumbotron>
        <h1>Hello Vaccinator!</h1>
        <br>
        <h3> Today's Date </h3>
        <p id="date_today"></p>
        <hr>
        <h3> Current Time </h3>
        <span id="time_now"></span>
        <hr>
        <h3> You Chart </h3>
        <div id="time_later" class='time_later'></div>
      </div>
    </div> -->

      <div class="p-2 mb-2 bg-light rounded-3 align-middle">
        <div class="container-fluid py-1">
          <h1 class="display-5 fw-bold align-middle">Hello there Vaccinator</h1>
          <p><i>Thank you for your service!</i></p>
        </div>
      </div>
      <br>

    <div class="row align-items-md-stretch">
        <div class="col-md-4">
          <div class="h-100 p-5 bg-light border rounded-3">
            <h3> Today's Date </h3>
            <p id="date_today"></p>
          </div>
        </div>

        <div class="col-md-4">
          <div class="h-100 p-5 bg-light border rounded-3">
            <h3> Current Time </h3>
            <span id="time_now"></span>
          </div>
        </div>

      <div class="col-md-4">
        <div class="h-100 p-5 bg-light border rounded-3">
          <h3> You Chart </h3>
          <div id="time_later"></div>
        </div>
      </div>
    </div>
    <br>
    <hr>
    <br>
    <iframe src="https://ourworldindata.org/explorers/coronavirus-data-explorer?zoomToSelection=true&pickerSort=desc&pickerMetric=total_vaccinations&Metric=People+vaccinated&Interval=Cumulative&Relative+to+Population=true&Align+outbreaks=false&country=~SGP&hideControls=true" loading="lazy" style="width: 100%; height: 500px; border: 1px none;"></iframe>

    <script>
        var time_now = document.getElementById('time_now');
        function time_now_fn() {
          var d = new Date();
          // var d = new Date(2021, 7, 6, 21, 29, 30, 0);
          var s = d.getSeconds();
          var m = d.getMinutes();
          var h = d.getHours();
          time_now.textContent =
            ("0" + h).substr(-2) + ":" + ("0" + m).substr(-2) + ":" + ("0" + s).substr(-2);
        }
      setInterval(time_now_fn, 1000);
    </script>

    <script>
        var time_later = document.getElementById('time_later');
        function time_later_fn() {
          var oldDateObj = new Date();
          // var oldDateObj = new Date(2021, 7, 6, 21, 29, 30, 0);
          var newDateObj = new Date();
          newDateObj.setTime(oldDateObj.getTime() + (30 * 60 * 1000));
          var coeff = 1000 * 60 * 5;
          var m = newDateObj.getMinutes();
          var m_rounded = (5 * Math.ceil(m / 5));
          var h = newDateObj.getHours();

          if (m_rounded == 60) {
            m_final = 0;
            h_final = h + 1;
          } else {
            m_final = m_rounded;
            h_final = h;
          }

          // Output in 24-hour format
          var output = ("0" + h_final).substr(-2) + ":" + ("0" + m_final).substr(-2).substr(-2)

          // Convert to 12-hour format
          var timeString = output;
          var H = +timeString.substr(0, 2);
          var hr = (H % 12) || 12;
          var ampm = H < 12 ? " AM" : " PM";
          timeString = hr + timeString.substr(2, 3) + ampm;

          time_later.textContent = timeString;
            // ("0" + h_final).substr(-2) + ":" + ("0" + m_final).substr(-2).substr(-2);

        }

      setInterval(time_later_fn, 1000);

      var today = new Date();
      var date = today.getDate()+'/'+(today.getMonth()+1)+'/'+today.getFullYear();
      document.getElementById("date_today").innerHTML = date;

    </script>



</body>
</html>
